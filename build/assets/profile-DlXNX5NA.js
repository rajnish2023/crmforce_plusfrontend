import{r as a,j as e,C as v}from"./index-CNDwPbcK.js";import{C}from"./index.esm-Dsfv9R7D.js";import{g as N,l as S}from"./api-B9qGc84N.js";/* empty css                  */import{b as U,a as F}from"./CContainer-CCuO_NJc.js";import{C as E,a as w}from"./CRow-C_mFcwcj.js";import{C as P}from"./CCard-B7_pa8np.js";import{C as I}from"./CCardBody-ChFyFuQj.js";import{C as A}from"./CForm-CIYK7ixP.js";import{C as l}from"./CInputGroup-BUs0JMgv.js";import{C as m}from"./CInputGroupText-D6clsvLr.js";import{c as j}from"./cil-user-Dlmw-Gem.js";import{C as d}from"./CFormInput-D4b8rLgv.js";import{C as k}from"./CFormTextarea-pLeFGw-9.js";const u=localStorage.getItem("token"),M=()=>{const[s,p]=a.useState({username:"",email:"",role:"",aboutus:""}),[n,t]=a.useState(!1),[x,i]=a.useState(null),[f,h]=a.useState(null);a.useEffect(()=>{(async()=>{t(!0);try{const r=await N(u);p(r.data)}catch(r){console.error("Failed to fetch user profile:",r),i("Failed to fetch user profile")}finally{t(!1)}})()},[u]);const c=o=>{const{name:r,value:y}=o.target;p(b=>({...b,[r]:y}))},g=async o=>{o.preventDefault(),t(!0);try{await S(u,s),h("User profile updated successfully"),i(null)}catch(r){console.error("Failed to update user profile:",r),i("Failed to update user profile"),h(null)}finally{t(!1)}};return e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"loading-overlay",children:e.jsxs("div",{className:"loading-content",children:[e.jsx(v,{color:"primary",size:"lg"}),e.jsx("p",{children:"Please wait, Your request is processing..."})]})}),e.jsx("div",{className:"bg-body-tertiary min-vh-90 d-flex flex-row align-items-center",children:e.jsx(U,{children:e.jsx(E,{className:"justify-content-center",children:e.jsx(w,{md:9,lg:7,xl:6,children:e.jsx(P,{className:"mx-4",children:e.jsx(I,{className:"p-4",children:e.jsxs(A,{onSubmit:g,children:[e.jsxs("p",{className:"text-center",children:["Hi ",s.name]}),x&&e.jsx("div",{className:"alert alert-danger",children:x}),f&&e.jsx("div",{className:"alert alert-success",children:f}),e.jsxs(l,{className:"mb-3",children:[e.jsx(m,{children:e.jsx(C,{icon:j})}),e.jsx(d,{placeholder:"Username",autoComplete:"username",value:s.name,name:"username",onChange:c})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(m,{children:"@"}),e.jsx(d,{placeholder:"Email",autoComplete:"email",value:s.email,name:"email",onChange:c})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(m,{children:e.jsx(C,{icon:j})}),e.jsx(d,{value:s.role==="superAdmin"?"Super Admin":s.role==="seo-expert"?"SEO Expert":s.role==="user"?"Content Writer":"",readOnly:!0})]}),e.jsx(l,{children:e.jsx(k,{rows:3,className:"mb-3",value:s.aboutus,name:"aboutus",onChange:c})}),e.jsx("div",{className:"d-grid",children:e.jsx(F,{color:"primary",type:"submit",disabled:n,children:n?"Updating...":"Update Account"})})]})})})})})})})]})};export{M as default};
